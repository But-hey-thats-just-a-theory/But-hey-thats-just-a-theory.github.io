@inject GameState GameState
@inject NavigationManager UriHelper

    <div style="position:relative">
        <h1>Welcome to Quepland</h1>
        <p>Quepland 2 is a semi-idle adventure game set in the world of Quepland.</p>

        @if (GameState.InitCompleted)
        {
            <button onclick="@(new Action(() => StartGame()))">Begin New Game</button>
        }
        else
        {
            <button disabled>Begin New Game</button>
        }


    </div>


@code {

    public void StartGame()
    {
        GameState.ShowStartMenu = false;
        GameState.Location = "QueplandFields";
        UriHelper.NavigateTo("/World/QueplandFields");
    }
    protected override void OnInitialized()
    {
        GameState.StateChanged += OnGameStateChanged;
    }
    public void Dispose()
    {
        GameState.StateChanged -= OnGameStateChanged;
    }
    void OnGameStateChanged(object sender, EventArgs e) => StateHasChanged();
}
